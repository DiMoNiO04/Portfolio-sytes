import a from"./playList.js";let settingsBtn=document.querySelector(".settings-button"),setting=document.querySelector(".settings"),weather=document.querySelector(".weather"),saveBtn=document.querySelector(".save-settings"),player=document.querySelector(".player"),quotes=document.querySelector(".quote"),greetingName=document.querySelector(".greeting-container"),todoLogo=document.querySelector(".todo-logo");settingsBtn.addEventListener("click",()=>{setting.classList.toggle("none"),setting.classList.toggle("visibly")}),saveBtn.addEventListener("click",()=>{setting.classList.toggle("none"),setting.classList.toggle("visibly")});let displayWeather=()=>{weather.classList.toggle("none"),weather.classList.toggle("visibly")},displayAudio=()=>{player.classList.toggle("none"),player.classList.toggle("visibly")},displayDate=()=>{data.classList.toggle("none"),data.classList.toggle("visibly")},displayTime=()=>{time.classList.toggle("none"),time.classList.toggle("visibly")},displayQuote=()=>{quotes.classList.toggle("none"),quotes.classList.toggle("visibly")},displayGreeting=()=>{greetingName.classList.toggle("none"),greetingName.classList.toggle("visibly")},displayTodo=()=>{todoLogo.classList.toggle("none"),todoLogo.classList.toggle("visibly")},selectTime=document.querySelector(".change-time"),timeFormatAll=["en-UK","en-UA"],timeFormat="",changeTime=()=>{timeFormat="en-UA"===selectTime.value?timeFormatAll[0]:timeFormatAll[1]},changeTimeFormat=()=>{selectTime.addEventListener("change",changeTime),changeTime()},settings=()=>{document.querySelector(".i-1").addEventListener("click",displayWeather),document.querySelector(".i-2").addEventListener("click",displayAudio),document.querySelector(".i-3").addEventListener("click",displayDate),document.querySelector(".i-4").addEventListener("click",displayTime),document.querySelector(".i-5").addEventListener("click",displayQuote),document.querySelector(".i-6").addEventListener("click",displayGreeting),document.querySelector(".i-7").addEventListener("click",displayTodo),changeTimeFormat()};settings();let selectLang=document.querySelector(".change-lang"),allLang=["en","ru"],hash=window.location.hash;function changeURLLanguage(){let a=selectLang.value;location.href=window.location.pathname+"#"+a,location.reload()}function changeLanguage(){hash=hash.substring(1),allLang.includes(hash)||(location.href=window.location.pathname+"#en",location.reload()),selectLang.value=hash}selectLang.addEventListener("change",changeURLLanguage),changeLanguage();let settingsSpan=document.querySelectorAll(".setting-span"),translateSettings=()=>{settingsSpan[0].innerHTML=langArr.settings.language[hash],settingsSpan[1].innerHTML=langArr.settings.timeFormat[hash],settingsSpan[2].innerHTML=langArr.settings.weather[hash],settingsSpan[3].innerHTML=langArr.settings.player[hash],settingsSpan[4].innerHTML=langArr.settings.date[hash],settingsSpan[5].innerHTML=langArr.settings.time[hash],settingsSpan[6].innerHTML=langArr.settings.quote[hash],settingsSpan[7].innerHTML=langArr.settings.greeting[hash],settingsSpan[8].innerHTML=langArr.settings.toDo[hash],settingsSpan[9].innerHTML=langArr.settings.image[hash],saveBtn.innerHTML=langArr.settings.save[hash]};translateSettings();let time=document.querySelector(".time"),data=document.querySelector(".lng-date"),greeting=document.querySelector(".lng-greeting");function showDate(){let a=new Date,b=a.toLocaleDateString(hash,{weekday:"long",month:"long",day:"numeric"});data.textContent=b}let getTimeOfDay=()=>{let b=new Date,a=b.getHours();return a>=6&&a<12?"morning":a>=12&&a<18?"afternoon":a>=18&&a<=23?"evening":"night"},showGreeting=()=>{let b=getTimeOfDay(),a="";a=langArr.greeting[hash][b],greeting.textContent=a},showTime=()=>{let a=new Date,b=a.toLocaleTimeString(timeFormat);time.textContent=b,showDate(),showGreeting(),setTimeout(showTime,1e3)};showTime();let name=document.querySelector(".name"),placeholder=name.getAttribute("placeholder"),setLocalStorage=()=>localStorage.setItem("name",name.value),getLocalStorage=()=>{localStorage.getItem("name")&&(name.value=localStorage.getItem("name")),name.placeholder=langArr.enterName[hash]};window.addEventListener("beforeunload",setLocalStorage),window.addEventListener("load",getLocalStorage);let getRandomNum=(a,b)=>Math.floor(Math.random()*(b-a+a)+a),body=document.querySelector("body"),timeOfDay=getTimeOfDay(),max=20,min=1,randomNum=getRandomNum(1,20),getImageForGithub=()=>{let b=randomNum.toString().padStart(2,"0"),a=new Image;a.src=`https://raw.githubusercontent.com/dimonio04/momentum-backgrounds/main/${timeOfDay}/${b}.webp`,a.addEventListener("load",()=>{body.style.backgroundImage=`url(${a.src})`})},getSlideNextForGithub=()=>{20!==randomNum?randomNum++:randomNum=1,getImageForGithub()},getSlidePrevForGithub=()=>{1!==randomNum?randomNum--:randomNum=20,getImageForGithub()},inputText=document.querySelector(".input-text"),inputApi=getTimeOfDay();async function getLinkImageFick(){let c=`https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=8f89c883ba37fe693345bd28f1833a72&tags=${inputApi}&extras=url_l&format=json&nojsoncallback=1`,d=await fetch(c),a=await d.json(),e=a.photos.photo.length,f=getRandomNum(0,e),b=new Image;b.src=a.photos.photo[f].url_l,b.addEventListener("load",()=>{body.style.backgroundImage=`url(${b.src})`})}function getImageForFick(){getLinkImageFick(),inputText.addEventListener("keyup",a=>{"Enter"===a.code&&(inputApi=inputText.value,getLinkImageFick())})}async function getLinkImageUniplash(){let b=`https://api.unsplash.com/photos/random?orientation=landscape&query=${inputApi}&client_id=rPPjkgf-ImtxXIwNWPEiPXRVXICNca0GRGPngvDn8Dk`,c=await fetch(b),d=await c.json(),a=new Image;a.src=d.urls.regular,a.addEventListener("load",()=>{body.style.backgroundImage=`url(${a.src})`})}function getImageForUniplash(){getLinkImageUniplash(),inputText.addEventListener("keyup",a=>{"Enter"===a.code&&(inputApi=inputText.value,getLinkImageUniplash())})}let selectImage=document.querySelector(".change-image"),changeImage=()=>{let a=selectImage.value;"git"===a?(getImageForGithub(),inputText.classList.add("hidden")):"unp"===a?(getImageForUniplash(),inputText.classList.remove("hidden")):(getImageForFick(),inputText.classList.remove("hidden"))},changeImageFormat=()=>{selectImage.addEventListener("change",changeImage),changeImage()};changeImageFormat();let slideNextBtn=document.querySelector(".slide-next"),slidePrevBtn=document.querySelector(".slide-prev"),nextSlide=()=>{"git"===selectImage.value?getSlideNextForGithub():"unp"===selectImage.value?getLinkImageUniplash():getLinkImageFick()},prevSlide=()=>{"git"===selectImage.value?getSlidePrevForGithub():"unp"===selectImage.value?getLinkImageUniplash():getLinkImageFick()};slideNextBtn.addEventListener("click",nextSlide),slidePrevBtn.addEventListener("click",prevSlide);let weatherIcon=document.querySelector(".weather-icon"),temperature=document.querySelector(".temperature"),weatherDescription=document.querySelector(".lng-weather-description"),city=document.querySelector(".lng-city"),wind=document.querySelector(".lng-wind"),humidity=document.querySelector(".lng-humidity"),getCityStart=()=>city.textContent=langArr.city[hash];async function getWeather(){let b=`https://api.openweathermap.org/data/2.5/weather?q=${city.textContent}&lang=${hash}&appid=43ea8a9a149244e09ee334702788b8aa&units=metric`,c=await fetch(b),a=await c.json();weatherIcon.className="weather-icon owf",weatherIcon.classList.add(`owf-${a.weather[0].id}`),temperature.textContent=`${a.main.temp.toFixed(0)}\xb0C`,weatherDescription.textContent=a.weather[0].description,wind.textContent=`${langArr["wind speed"][hash]} ${a.wind.speed.toFixed(0)} m/s`,humidity.textContent=`${langArr.humidity[hash]} ${a.main.humidity}%`}function setCity(a){"Enter"===a.code&&(getWeather(),city.blur())}getCityStart(),document.addEventListener("DOMContentLoaded",getWeather),city.addEventListener("keypress",setCity);let quote=document.querySelector(".lng-quote"),author=document.querySelector(".lng-author"),changeQuote=document.querySelector(".change-quote"),minQuote=0,maxQuote=600,getRandomQuote=()=>Math.floor(600*Math.random()+0);async function getQuotes(){let a=getRandomQuote();if("en"===hash){let d=await fetch("./json/quoteEn-min.json"),b=await d.json();quote.textContent=b[a].text,author.textContent=b[a].author}else{let e=await fetch("./json/quoteRu-min.json"),c=await e.json();quote.textContent=c[a].text,author.textContent=c[a].author}}document.addEventListener("DOMContentLoaded",getQuotes),changeQuote.addEventListener("click",getQuotes);let audio=document.querySelector("audio"),playPrevButton=document.querySelector(".play-prev"),playNextButton=document.querySelector(".play-next"),play=document.querySelector(".play"),playAudio=()=>{audio.play(),play.classList.add("pause"),isPlay=!0,itemActive(),getNameSong()},pauseAudio=()=>{play.classList.remove("pause"),isPlay=!1,audio.pause()},playPause=()=>isPlay?pauseAudio():playAudio(),playNext=()=>{playNum===countPlays?playNum=0:playNum+=1,audioPlayList(),toggleButton(),playAudio()},playPrev=()=>{0===playNum?playNum=countPlays:playNum-=1,audioPlayList(),toggleButton(),playAudio()},toggleButton=()=>isPlay?play.classList.remove("pause"):play.classList.add("pause");play.addEventListener("click",playPause),audio.addEventListener("ended",playNext),playNextButton.addEventListener("click",playNext),playPrevButton.addEventListener("click",playPrev);let playListContainer=document.querySelector(".play-list"),nameSong=document.querySelector(".nameSong"),countPlays=a.length-1,isPlay=!1,playNum=0,audioPlayList=()=>audio.src=a[playNum].src,getNameSong=()=>nameSong.textContent=a[playNum].title;audioPlayList(),getNameSong();let createPlayList=()=>{for(let b=0;b<a.length;b++){let c=document.createElement("li");c.classList.add("play-item"),c.textContent=a[b].title,playListContainer.append(c)}};createPlayList();let playItem=document.querySelectorAll(".play-item"),itemActive=()=>{for(let a=0;a<playItem.length;a++)playItem[a].classList.remove("item-active");playItem[playNum].classList.add("item-active")},volumeBtn=document.querySelector(".volume"),progressVolume=document.querySelector(".volume-progress"),nowVolume=document.querySelector(".now-volume"),volumeMute=()=>{audio.volume=0,volumeMin()},volumeActive=()=>{audio.volume=1,volumeMax()},volume=()=>{volumeBtn.classList.contains("volume-active")?(volumeBtn.classList.add("volume-mute"),volumeBtn.classList.remove("volume-active"),volumeMute()):(volumeBtn.classList.remove("volume-mute"),volumeBtn.classList.add("volume-active"),volumeActive())};progressVolume.addEventListener("click",function(b){let c=progressVolume.getBoundingClientRect().left,a=(b.pageX-c)/progressVolume.offsetWidth;nowVolume.style.width=100*a.toFixed(3)+"%",audio.volume=a});let volumeOver=()=>progressVolume.classList.remove("hidden"),volumeOut=()=>progressVolume.classList.add("hidden"),volumeMax=()=>nowVolume.style.width="100%",volumeMin=()=>nowVolume.style.width=0;volumeBtn.addEventListener("click",volume),volumeBtn.addEventListener("mouseover",volumeOver),document.addEventListener("click",volumeOut),document.addEventListener("DOMContentLoaded",volumeMax);let start=document.querySelector(".start"),end=document.querySelector(".end"),progressBar=document.querySelector(".progress-bar"),now=document.querySelector(".now"),conversion=c=>{let a=Math.floor(c/60);a=1===a.toString().length?"0"+a:a;let b=Math.round(c%60);return`${a}:${b=1===b.toString().length?"0"+b:b}`},getEndStartTime=()=>{end.innerHTML=conversion(audio.duration),start.innerHTML=conversion(audio.currentTime)};progressBar.addEventListener("click",function(b){let c=progressBar.getBoundingClientRect().left,a=(b.pageX-c)/progressBar.offsetWidth;now.style.width=100*a.toFixed(3)+"%",audio.currentTime=a*audio.duration}),setInterval(()=>{start.innerHTML=conversion(audio.currentTime),now.style.width=audio.currentTime/audio.duration.toFixed(3)*100+"%"},1e3),audio.addEventListener("loadedmetadata",getEndStartTime);let addMessage=document.querySelector(".todo-item-input"),addButton=document.querySelector(".add-btn"),todo=document.querySelector(".todo"),todoBtn=document.querySelector(".todo-icon"),toDo=document.querySelector(".todo_list"),todoList=[];function displayMessages(){let a="";0===todoList&&(todo.innerHTML=""),todoList.forEach(function(c,b){a+=`
            <li>
                <input type='checkbox' id='item-${b}' ${c.checked?"checked":""}>
                <label for='item-${b}'>${c.todo}</label>
                 <button class='delete-todo-item' id='delete-todo-item-${b}'>Delete</button>
            </li>
        `,todo.innerHTML=a})}todoBtn.addEventListener("click",()=>{toDo.classList.toggle("none"),toDo.classList.toggle("visibly")}),localStorage.getItem("todo")&&(todoList=JSON.parse(localStorage.getItem("todo")),displayMessages()),addButton.addEventListener("click",function(){if(!addMessage.value)return;let a={todo:addMessage.value,checked:!1};todoList.push(a),displayMessages(),localStorage.setItem("todo",JSON.stringify(todoList)),addMessage.value=""});let changeCheckedToDoItem=a=>{let b=a.target.getAttribute("id"),c=todo.querySelector("[for="+b+"]").innerHTML;todoList.forEach(function(a){a.todo===c&&(a.checked=!a.checked,localStorage.setItem("todo",JSON.stringify(todoList)))})},deleteToDoItem=c=>{let a=c.target.getAttribute("id"),b=String(a).substr(-1);a===`delete-todo-item-${b}`&&(todoList.splice(b,1),0===todoList.length&&(todo.innerHTML=""),localStorage.setItem("todo",JSON.stringify(todoList)),displayMessages())};todo.addEventListener("change",changeCheckedToDoItem),todo.addEventListener("click",deleteToDoItem);let todoTitle=document.querySelector(".todo-title");todoTitle.textContent=langArr.toDo.todoList[hash],addButton.textContent=langArr.toDo.add[hash]